Patches Directory
=================

This directory contains patches and scripts for modifying Net-SNMP source code to support ezsnmp functionality.

Overview
--------

The patches in this directory allow ezsnmp to work with different versions of Net-SNMP (5.6 through 5.9). The process involves fetching the Net-SNMP source code, applying necessary modifications, and generating version-specific patches.

Order of Operations
-------------------

Follow these steps in order to prepare and apply patches for your desired Net-SNMP version:

1. **Fetch Net-SNMP Versions**

   Run the ``fetch_net_snmp_versions.sh`` script to download the source code for Net-SNMP versions 5.6 through 5.9:

   .. code-block:: bash

      ./fetch_net_snmp_versions.sh

   This script will populate the ``net-snmp-X.Y/`` directories with the respective source code.

2. **Tweak Master Source Code**

   Modify the code in the ``master_src/`` directory as needed. This directory contains the base source code that will be used to generate patches for different Net-SNMP versions.

3. **Generate Patches**

   Run the ``make_patches.sh`` script to create patches for a specific Net-SNMP version:

   .. code-block:: bash

      ./make_patches.sh <version>

   Replace ``<version>`` with the desired Net-SNMP version (e.g., 5.8, 5.9).

4. **Apply Patches**

   Use the ``apply_patches.sh`` script to apply the generated patches to the Net-SNMP source code:

   .. code-block:: bash

      ./apply_patches.sh <version>

   This will apply the patches in the ``net-snmp-<version>-patches/`` directory to the corresponding ``net-snmp-<version>/`` source code.

Version-Specific Notes
----------------------

**Net-SNMP 5.8 and Lower**

For Net-SNMP versions 5.8 and lower, you must use ``netsnmp_cleanup_session(&session);`` instead of the newer cleanup functions, as it does not exist in these versions.

.. note::
   If you are building from source and applying patches, you may need to install `dos2unix` on your system. On Ubuntu/Debian, run `sudo apt install dos2unix`. On macOS, use `brew install dos2unix`.

This content was generated by AI and reviewed by humans. Mistakes may still occur. PRs for corrections are welcome.