=============
Python Tests
=============

Overview
========
This directory contains the Python unit tests for EzSnmp. These tests use pytest to 
validate the Python API and ensure compatibility across different Python versions.

Purpose
=======
The Python tests ensure that:

* The Session class API works correctly
* SNMP v1, v2c, and v3 operations function properly
* Authentication and privacy protocols work as expected
* Error handling and exceptions are raised appropriately
* Results are formatted correctly
* Python 3.10+ compatibility is maintained

Test Structure
==============
The tests are organized to cover:

* **Session operations**: GET, SET, WALK, BULKGET, BULKWALK
* **Protocol versions**: SNMPv1, SNMPv2c, SNMPv3
* **Authentication**: MD5, SHA, SHA-224, SHA-256, SHA-384, SHA-512
* **Privacy protocols**: DES, AES, AES-192, AES-256
* **Error conditions**: Timeouts, invalid OIDs, authentication failures
* **Edge cases**: Empty results, malformed data, concurrent operations

Requirements
============
Install test dependencies:

.. code-block:: bash

    pip install -r requirements.txt

Running Tests
=============

**Local Testing (Native)**

To run all tests locally:

.. code-block:: bash

    # From the repository root
    tox

To run tests with pytest directly:

.. code-block:: bash

    # From the repository root
    python3 -m pytest python_tests/

To run a specific test file:

.. code-block:: bash

    python3 -m pytest python_tests/test_session.py

To run with verbose output:

.. code-block:: bash

    python3 -m pytest -v python_tests/

**Docker-Based Testing (Recommended)**

To run tests using Docker across multiple distributions:

.. code-block:: bash

    # Run all Python tests across all distributions
    cd docker/
    ./run_python_tests_in_all_dockers.sh

    # Run tests in a specific distribution only
    ./run_python_tests_in_all_dockers.sh almalinux10

For more details, see the `Docker README <../docker/README.rst>`_.

SNMP Daemon Configuration
==========================
The tests require a properly configured SNMP daemon. The shared configuration file
is located at ``configs/snmpd.conf``.

To set up the SNMP daemon for testing on Linux:

.. code-block:: bash

    sudo systemctl stop snmpd
    sudo mv /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.orig
    sudo cp configs/snmpd.conf /etc/snmp/snmpd.conf
    sudo systemctl start snmpd

On macOS:

.. code-block:: bash

    sudo mv /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.orig
    sudo cp configs/snmpd.conf /etc/snmp/snmpd.conf
    sudo launchctl unload /System/Library/LaunchDaemons/org.net-snmp.snmpd.plist
    sudo launchctl load -w /System/Library/LaunchDaemons/org.net-snmp.snmpd.plist

Related Documentation
=====================
* `Main README <../README.rst>`_
* `Development Guide <../sphinx_docs_build/source/development.rst>`_
* `Integration Tests <../integration_tests/README.rst>`_
* `C++ Tests <../cpp_tests/README.rst>`_

----

.. note::
   This content was generated by AI and reviewed by humans. Mistakes may still occur. PRs for corrections are welcome.
